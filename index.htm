<html>

<head>
    <script src="webfont.js"></script>
    <script src="snap.svg-min.js"></script>
    <script src="underscore-min.js"></script>
    <script src="sequence-diagram-min.js"></script>
    <script>
        function draw(topElement) {
            var text = topElement.value;
            var diag = topElement.parentNode.querySelector(".diagram");
            diag.innerHTML = "";
            var diagram = Diagram.parse(text);
            diagram.drawSVG(diag, { theme: 'simple' });
        }

        function add() {
            const div = document.createElement('div');
            div.innerHTML = `
            <div>
                <textarea class="input" rows="10" cols="100" onkeyup="draw(this)"></textarea>
                <div>
                    <button onclick="remove(this)">Remove</button>
                </div>
                <div class="diagram"></div>
            </div>
            <hr/>
            `;
            document.getElementById("content").appendChild(div);
        }

        function remove(input) { 
            document.getElementById("content").removeChild(input.parentNode.parentNode.parentNode);
        }

        document.addEventListener("DOMContentLoaded", function(){ 
            add();
        }, false);
        
    </script>
</head>

<body>
    <div>
        <h1>JS-Sequence Diagrams</h1>
        <div id="content">       
        </div>
        <button onclick="add()">Add</button>
    </div>
</body>

</html>